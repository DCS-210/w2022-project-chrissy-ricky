<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Covid-19, Global Pandemic, and Data Science</title>
    <meta charset="utf-8" />
    <meta name="author" content="Team Chrissy &amp; Ricky   Chrissy Aman and Ricky Sun" />
    <meta name="date" content="2022-04-11" />
    <script src="libs/header-attrs-2.11/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Covid-19, Global Pandemic, and Data Science
### Team Chrissy &amp; Ricky <br> Chrissy Aman and Ricky Sun
### Bates College
### 2022-04-11

---










## Outline 

&lt;style type="text/css"&gt;
.remark-slide-content {
    font-size: 30px;
    padding: 1em 4em 1em 4em;
}
&lt;/style&gt;

- Introduction

- Literature Review

- Our Data  

- Methods &amp; Data Analyses

- Results

- Limitations and Potential Future Studies

---


class: inverse, center, middle

background-image: url("images/cool.png")

# Introduction

How to add background pic 
---

# Introduction 

COVID-19, also known as Coronavirus disease 2019 is a contagious disease caused by a virus, the severe acute respiratory syndrome coronavirus 2 (SARS-CoV-2)

Up until yesterday, there are over xxx infections and xxx deaths since the beginning of the pandemic

Although no one can predict a pandemic like this, with the help of data, we might be able to use available data to, for example, evaluate risks, so that the virus can be better managed or even contained in earlier stages. 

---

## Research Question

- In our research, we are trying to use Covid-19 related data, together with other relevant
data to find potential predictors for Covid-19 cases, deaths, or vaccination rates. 


? Do vaccinations effectively mitigate the death rate 

? Can we implement machine learning algorithm to predict Covid-19

? Are higher percentage of older people predicts higher death rate

? What about other variables in predicting Covid-19

---

class: inverse, middle, center

# Literature Review



---

class: my-one-page-font

# [1] Covid-19 severity

- The unpredictability of the progression of coronavirus disease 2019 (COVID-19) may be attributed to the low precision of the tools used to predict the prognosis of this disease, especially when the virus is mutating in a fast speed from alpha, to Omicron, and there are more recent variants too. 

- With the help of models proposed (using clinical data) by those paper, we may be better at prognosis of Covid-19 cases severity. This can also be used in decision-making related to the care of patients infected with COVID-19.

.my-one-page-font {
  font-size: 20px;
}

]
.footnote[
vv
]
---

# [2] Covid-19 and weather

- Akin to respiratory tract infection diseases, climatic conditions may significantly influence the COVID-19 pandemic Since the beginning of the COVID-19 pandemic, significant efforts have been made to explore the relationship between climatic condition and growth in number of COVID-19 cases. 

- From those studies, it seems that there are significant Interactions of temperature and relative humidity for growth of COVID-19 cases and death rates. Air pollution may be another factor that predict covid-19 deaths. Those evidence are collected from various of countries.

---
# [3] Covid-19 and social media

- Social media data (such as twits or social media indexes) from, for example, google search, twitter, facebook and other social media platform, may also be used to develop models and as early warning signals of COVID-19 outbreaks. Social media data can also presents with people's perception of risks and general mental states of a region.

---

# [4] COVID-19 and impacts

- Covid-19 also has had great impacts in our daily lives (racial issues, job markets, also economic activities, and so on)

### It is found that an increase in vaccination per capita is associated with a significant increase in economic activity. 

### It is also found evidence for nonlinear effects of vaccines: marginal economic benefits when vaccination rates are higher. 

### Country-specific conditions play an important role, with lower economic gains if strict containment measures are in place or if the country is experiencing a severe outbreak.

---

# [5] Covid-19 and machine learning

- Developing accurate forecasting tools will help in our fight against the pandemic. Prediction models that combine several features to estimate the risk of infection have been developed. 

- These aim to assist medical staff worldwide in triaging patients, especially in the context of limited healthcare resources.

# [6] vitamin D and covid-19
https://www.frontiersin.org/articles/10.3389/fpubh.2021.736665/full

Several studies suggest an association between serum 25-hydroxyvitamin D (25OHD) and the likelihood of suffering severe symptoms of covid-19. The data supports a significant effect of vitamin D in preventing and mitigating respiratory tract infections have emerged. Severe deficiency, deficiency and insufficiency of vitamin D were all associated with ICU admission In this study of almost 1.5 million individuals. 
---

# Literature Review - [6?]

---

class: inverse, middle, center

# Our Data

---

## Our Data - details

Our dataset is coming from "Our World in Data" Covid-19 public data, together with data from JHU, WHO, CDC and World Bank. The data covers a wide range:

- Basic Covid-19 data (cases, deaths)
- Hospital &amp; ICU (ICU beds, ICU patients)
- Policy responses (stringency_index)
- Reproduction rate
- Tests &amp; positivity
- Vaccinations
- Others (populations, life_expectancy, GDP per catpita and so on)

---

class: inverse, middle, center

# Methods &amp; Data Analyses

---

# Methods &amp; Data Analyses - details

We have three major parts of analyses:
1. preliminary exploration like summary statistics, scatter plots, correlations, maps

2. Regression analyses, ranging from OLS, Diff in Diff, regression continuity

3. Advanced models and machine learning algorithnms

---

class: inverse, middle, center

# Results &amp; Implications 

---

# [1a] summary statistics
Cases

```
## Selecting by total_cases_per_million
```

```
## # A tibble: 10 × 2
##    location       total_cases_per_million
##    &lt;chr&gt;                            &lt;dbl&gt;
##  1 Faeroe Islands                 653253.
##  2 Andorra                        485935.
##  3 Denmark                        443474.
##  4 Gibraltar                      441453.
##  5 Slovenia                       422392.
##  6 San Marino                     415966.
##  7 Seychelles                     393449.
##  8 Georgia                        389191.
##  9 Israel                         382398.
## 10 Slovakia                       367140.
```

---
map1


---

Deaths

```
## Selecting by total_deaths_per_million
```

```
## # A tibble: 10 × 2
##    location               total_deaths_per_million
##    &lt;chr&gt;                                     &lt;dbl&gt;
##  1 Peru                                      6279.
##  2 Bulgaria                                  5081.
##  3 Bosnia and Herzegovina                    4677.
##  4 Hungary                                   4470.
##  5 North Macedonia                           4272.
##  6 Montenegro                                4232.
##  7 Georgia                                   3984.
##  8 Croatia                                   3630.
##  9 Czechia                                   3564.
## 10 Slovakia                                  3347.
```
---

Vaccinations

```
## Selecting by vaccination_rate
```

```
## # A tibble: 10 × 2
##    location             vaccination_rate
##    &lt;chr&gt;                &lt;chr&gt;           
##  1 United Arab Emirates 95%             
##  2 Portugal             91%             
##  3 Singapore            90%             
##  4 Malta                89%             
##  5 Chile                89%             
##  6 Cuba                 87%             
##  7 South Korea          86%             
##  8 Spain                83%             
##  9 Denmark              82%             
## 10 Cambodia             82%
```
---

# [1a] summary statistics
Boosters

```
## Selecting by booster
```

```
## # A tibble: 10 × 2
##    location    booster
##    &lt;chr&gt;       &lt;chr&gt;  
##  1 Chile       71%    
##  2 Malta       66%    
##  3 Singapore   65%    
##  4 Denmark     62%    
##  5 Italy       61%    
##  6 Belgium     60%    
##  7 Portugal    60%    
##  8 South Korea 59%    
##  9 Luxembourg  57%    
## 10 Ireland     56%
```
---

# [1a] summary statistics

Medical resources (icu_patients_per_million)

```
## Selecting by icu_patients_per_million
```

```
## # A tibble: 10 × 2
##    location      icu_patients_per_million
##    &lt;chr&gt;                            &lt;dbl&gt;
##  1 Chile                             52.5
##  2 France                            43.4
##  3 Argentina                         34.5
##  4 Czechia                           33.6
##  5 Israel                            33.4
##  6 United States                     32.4
##  7 Germany                           28.5
##  8 Belgium                           27.1
##  9 Spain                             25.8
## 10 Austria                           20.8
```

---

# [1a] summary statistics
General health information (aged 70 and over)

```
## Selecting by age70
```

```
## # A tibble: 10 × 2
##    location  age70
##    &lt;chr&gt;     &lt;chr&gt;
##  1 Japan     18%  
##  2 Italy     16%  
##  3 Germany   16%  
##  4 Portugal  15%  
##  5 Greece    15%  
##  6 Latvia    14%  
##  7 Spain     14%  
##  8 Lithuania 14%  
##  9 Austria   14%  
## 10 Estonia   13%
```

---

# [1a] summary statistics
General health information (diabetes prevalence)

```
## Selecting by diabetesp
```

```
## # A tibble: 10 × 2
##    location             diabetesp
##    &lt;chr&gt;                &lt;chr&gt;    
##  1 Marshall Islands     31%      
##  2 New Caledonia        23%      
##  3 Kiribati             23%      
##  4 French Polynesia     23%      
##  5 Mauritius            22%      
##  6 Solomon Islands      19%      
##  7 Saudi Arabia         18%      
##  8 Papua New Guinea     18%      
##  9 Egypt                17%      
## 10 United Arab Emirates 17%
```

---

# [1a] summary statistics
Development (HDI)

```
## Selecting by human_development_index
```

```
## # A tibble: 10 × 2
##    location    human_development_index
##    &lt;chr&gt;                         &lt;dbl&gt;
##  1 Norway                        0.957
##  2 Ireland                       0.955
##  3 Switzerland                   0.955
##  4 Hong Kong                     0.949
##  5 Iceland                       0.949
##  6 Germany                       0.947
##  7 Sweden                        0.945
##  8 Australia                     0.944
##  9 Netherlands                   0.944
## 10 Denmark                       0.94
```

---

# Results &amp; Implications [1b: preliminary analyses - correlation and heat map]


```r
covid_heat &lt;- covid_data %&gt;%
  filter(date == "2022-02-20") %&gt;%
  filter(is.na(continent) == FALSE) %&gt;%
  mutate(smoker = female_smokers + male_smokers) %&gt;%
  select(total_vaccinations, total_cases, total_deaths, total_boosters, icu_patients_per_million, hosp_patients_per_million, population_density, extreme_poverty, aged_70_older, cardiovasc_death_rate, smoker, human_development_index) %&gt;%
  na.omit()
  
cormat &lt;- round(cor(covid_heat),2)
cormat
```

```
##                           total_vaccinations total_cases total_deaths total_boosters
## total_vaccinations                      1.00        0.99         0.99           0.98
## total_cases                             0.99        1.00         1.00           0.96
## total_deaths                            0.99        1.00         1.00           0.96
## total_boosters                          0.98        0.96         0.96           1.00
## icu_patients_per_million                0.38        0.41         0.43           0.32
## hosp_patients_per_million              -0.28       -0.23        -0.21          -0.27
## population_density                     -0.31       -0.23        -0.25          -0.26
## extreme_poverty                         0.46        0.41         0.44           0.54
## aged_70_older                          -0.06       -0.04        -0.04           0.03
## cardiovasc_death_rate                   0.16        0.12         0.14           0.13
## smoker                                 -0.02        0.05         0.04           0.03
## human_development_index                 0.13        0.17         0.14           0.12
##                           icu_patients_per_million hosp_patients_per_million
## total_vaccinations                            0.38                     -0.28
## total_cases                                   0.41                     -0.23
## total_deaths                                  0.43                     -0.21
## total_boosters                                0.32                     -0.27
## icu_patients_per_million                      1.00                      0.17
## hosp_patients_per_million                     0.17                      1.00
## population_density                            0.29                      0.63
## extreme_poverty                               0.32                      0.00
## aged_70_older                                -0.05                      0.16
## cardiovasc_death_rate                        -0.30                     -0.07
## smoker                                        0.48                      0.44
## human_development_index                       0.22                     -0.03
##                           population_density extreme_poverty aged_70_older
## total_vaccinations                     -0.31            0.46         -0.06
## total_cases                            -0.23            0.41         -0.04
## total_deaths                           -0.25            0.44         -0.04
## total_boosters                         -0.26            0.54          0.03
## icu_patients_per_million                0.29            0.32         -0.05
## hosp_patients_per_million               0.63            0.00          0.16
## population_density                      1.00           -0.14          0.07
## extreme_poverty                        -0.14            1.00          0.47
## aged_70_older                           0.07            0.47          1.00
## cardiovasc_death_rate                  -0.23           -0.24         -0.65
## smoker                                  0.62            0.19          0.23
## human_development_index                 0.11            0.01          0.34
##                           cardiovasc_death_rate smoker human_development_index
## total_vaccinations                         0.16  -0.02                    0.13
## total_cases                                0.12   0.05                    0.17
## total_deaths                               0.14   0.04                    0.14
## total_boosters                             0.13   0.03                    0.12
## icu_patients_per_million                  -0.30   0.48                    0.22
## hosp_patients_per_million                 -0.07   0.44                   -0.03
## population_density                        -0.23   0.62                    0.11
## extreme_poverty                           -0.24   0.19                    0.01
## aged_70_older                             -0.65   0.23                    0.34
## cardiovasc_death_rate                      1.00  -0.06                   -0.79
## smoker                                    -0.06   1.00                   -0.21
## human_development_index                   -0.79  -0.21                    1.00
```

```r
melted_cormat &lt;- melt(cormat)
head(melted_cormat)
```

```
##                        Var1               Var2 value
## 1        total_vaccinations total_vaccinations  1.00
## 2               total_cases total_vaccinations  0.99
## 3              total_deaths total_vaccinations  0.99
## 4            total_boosters total_vaccinations  0.98
## 5  icu_patients_per_million total_vaccinations  0.38
## 6 hosp_patients_per_million total_vaccinations -0.28
```

```r
ggplot(data = melted_cormat, aes(x=Var1, y=Var2, fill=value)) + 
  geom_tile() +
  geom_tile(color = "white") +
  scale_fill_gradient2(low = "blue", high = "red", mid = "white", 
                       midpoint = 0, limit = c(-1,1), space = "Lab",
                       name="Pearson\nCorrelation") +
  theme_minimal() + 
  theme(axis.text.x = element_text(angle = 45, vjust = 1, 
                                   size = 12, hjust = 1))+
  coord_fixed()
```

&lt;img src="presentation_files/figure-html/correlation_heatmap-1.png" width="80%" /&gt;

---

# Results &amp; Implications [1c: preliminary analyses - maps]

Include dynamic maps for vaccination



Alt (alternative) text
1. chart type
2. of type data (x and y, color)
3. reason for including chart




```r
worldshapefile &lt;- "data/world_shape_file/TM_WORLD_BORDERS-0.3.shp"
shape &lt;- st_read(dsn = "../data/world_shape_file/TM_WORLD_BORDERS-0.3.shp")
```

```
## Reading layer `TM_WORLD_BORDERS-0.3' from data source 
##   `/cloud/project/data/world_shape_file/TM_WORLD_BORDERS-0.3.shp' using driver `ESRI Shapefile'
## Simple feature collection with 246 features and 11 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -180 ymin: -90 xmax: 180 ymax: 83.6236
## Geodetic CRS:  WGS 84
```

---

# Results &amp; Implications [1d: preliminary analyses - scatter plots and other ggplots]

Alt (alternative) text
1. chart type
2. of type data (x and y, color)
3. reason for including chart


```r
covid_data %&gt;%
  filter(date == "2022-02-20") %&gt;%
  filter(is.na(continent) == FALSE) %&gt;%
  mutate(smoker = female_smokers + male_smokers) %&gt;%
  mutate(vaccination_rate = people_fully_vaccinated/population) %&gt;%  
  mutate(booster = total_boosters/population) %&gt;%
  ggplot(mapping = aes(x = vaccination_rate, 
                       y = human_development_index)) +
  geom_point(size = 1, mapping = aes()) +
  labs(title = "vaccination rate vs. human development index", 
       subtitle = "xx",
       x = "vaccination rate",
       y = "human development index") +
  scale_color_viridis_d() +
  geom_smooth(color = "blue") 
```

```
## `geom_smooth()` using method = 'loess' and formula 'y ~ x'
```

```
## Warning: Removed 131 rows containing non-finite values (stat_smooth).
```

```
## Warning: Removed 131 rows containing missing values (geom_point).
```

&lt;img src="presentation_files/figure-html/vaccination-HDI-1.png" width="80%" /&gt;


```r
covid_data %&gt;%
  filter(date == "2022-02-20") %&gt;%
  filter(is.na(continent) == FALSE) %&gt;%
  mutate(smoker = female_smokers + male_smokers) %&gt;%
  mutate(death = total_deaths/population) %&gt;%  
  mutate(booster = total_boosters/population) %&gt;%
  ggplot(mapping = aes(x = death, 
                       y = diabetes_prevalence)) +
  geom_point(size = 1, mapping = aes()) +
  labs(title = "percentage death of population vs. diabetes prevalence", 
       subtitle = "xx",
       x = "percentage death of population",
       y = "diabetes prevalence") +
  scale_color_viridis_d() +
  geom_smooth(color = "blue") 
```

```
## `geom_smooth()` using method = 'loess' and formula 'y ~ x'
```

```
## Warning: Removed 22 rows containing non-finite values (stat_smooth).
```

```
## Warning: Removed 22 rows containing missing values (geom_point).
```

&lt;img src="presentation_files/figure-html/cases-diabetes-1.png" width="80%" /&gt;

---

# Results &amp; Implications [1e: time series analyses]

---

background-image: url(https://images.unsplash.com/photo-1535448033526-c0e85c9e6968?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1650&amp;q=80)

how to adjust transparency of background pic

---

# Results &amp; Implications - [2a: regression analyses - simple linear regression]


```r
linear_reg() %&gt;%
  set_engine("lm") %&gt;%
  fit(total_cases_per_million ~ population_density + hospital_beds_per_thousand, data = covid_country) %&gt;%
  tidy()
```

```
## # A tibble: 3 × 5
##   term                       estimate std.error statistic     p.value
##   &lt;chr&gt;                         &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;
## 1 (Intercept)                56408.    13530.       4.17  0.0000493  
## 2 population_density            -3.02      5.53    -0.545 0.587      
## 3 hospital_beds_per_thousand 20061.     3651.       5.49  0.000000146
```


```r
linear_reg() %&gt;%
  set_engine("lm") %&gt;%
  fit(total_cases_per_million ~ population_density, data = covid_country) %&gt;%
  tidy()
```

```
## # A tibble: 2 × 5
##   term                estimate std.error statistic  p.value
##   &lt;chr&gt;                  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 (Intercept)        117818.     9238.      12.8   1.11e-27
## 2 population_density      1.29      4.29     0.301 7.64e- 1
```

---

# Results &amp; Implications - [2a: regression analyses - simple linear regression]




---

# Results &amp; Implications - [2b: regression analyses - other]




# Results &amp; Implications - [3: machine learnng]

1. linear regression


2. logistic regression


3. KNN (clusters) https://github.com/allisonhorst/stats-illustrations/



---

class: inverse, middle, center

# Limitations and Potential Future Studies

---

# Limitations - details


---

# Future Studies

Future studies

---

# References

[1] Want to find out more about `xaringan`? See https://slides.yihui.name/xaringan/#1.

[2] You are welcomed to use the default styling of the slides. In fact, that's what I expect majority of you will do. You will differentiate yourself with the content of your presentation.

[3]

[4]

---
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
